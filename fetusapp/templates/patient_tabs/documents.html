<!-- {% import 'macros.html' as macros %} -->
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='history_gyn.css') }}"> -->

<div>
    <h5>Αποθεκευμένα έγγραφα ασθενούς</h5>
</div>

{% if documents and documents|length > 0 %}
    <div class="table-responsive">
        <table class="table table-dark table-striped">
            <thead>
                <tr>
                    <th>Ονομα αρχείου</th>
                    <th>Ημερομηνία</th>
                    <th>Μέγεθος (bytes)</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for doc in documents %}
                <tr>
                    <td>{{ doc.original_filename }}</td>
                    <td>
                        {% if doc.created_on %}
                            {{ doc.created_on[:10] }} {{ doc.created_on[11:16] }}
                        {% else %}
                            -
                        {% endif %}
                    </td>
                    <td>{{ (doc.size_bytes / 1048576) | round(2) if doc.size_bytes else '-' }} MB</td>
                    <td>
                        {% if doc.blob_path %}
                            <a class="btn btn-sm btn-outline-light" href="/documents/{{ doc.id }}" target="_blank">Άνοιγμα</a>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="p-3 text-muted">Δεν βρέθηκαν αρχεία για την ασθενή.</div>
{% endif %}
